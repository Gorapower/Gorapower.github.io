<!doctype html>
<head>
  <meta charset="utf-8">

  <title>My Parse App</title>
  <meta name="description" content="My Parse App">
  <meta name="viewport" content="width=device-width">
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript" src="http://www.parsecdn.com/js/parse-latest.js"></script>
</head>

<body ng-app="AuthApp">

  <div id="login">
    <h1>Mike y horario no saben JS</h1>
    <p> Ingresa tus datos plox, es para logearte a tu bainder locochon</p>
  <form ng-hide="currentUser">
    <h2>Sign up</h2>
    Email: <input type="email" ng-model="user.email" /><br />
    Username: <input type="text" ng-model="user.username" /><br />
    Password: <input type="password" ng-model="user.password" /><br />
    <button ng-click="signUp(user)">Sign up</button>
  </form>
 
  <div ng-show="currentUser">
    <h1>Welcome {{currentUser.get('username')}}</h1>
    <p>You have been successfully logged in</p>
    <button ng-click="logOut()">Log out</button>
  </div>

  <script type="text/javascript">
    Parse.initialize("8aaaoh6a5ZkjO5SIzzVVtUsFjDBcKsSdUP9lcoIl", "8YxX1Lyyp1iIBE5YEDIZnD8qzRhUg7y1AaSZkTmm");
    
    angular.module('AuthApp', [])
   .run(['$rootScope', function($scope) {
  $scope.currentUser = Parse.User.current();
 
  $scope.signUp = function(form) {
    var user = new Parse.User();
    user.set("email", form.email);
    user.set("username", form.username);
    user.set("password", form.password);
 
    user.signUp(null, {
      success: function(user) {
        $scope.currentUser = user;
        $scope.$apply(); // Notify AngularJS to sync currentUser
      },
      error: function(user, error) {
        alert("Unable to sign up:  " + error.code + " " + error.message);
      }
    });    
  };
 
  $scope.logOut = function(form) {
    Parse.User.logOut();
    $scope.currentUser = null;
  };
}]);
  </script>
</body>

</html>
